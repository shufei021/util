!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).local=t()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return JSON.parse(a(e))}function c(e){return"string"==typeof e}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return"symbol"!=t(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i(t,e){if(c(t)){var r=null;try{r=f(t),"false"!==(r=s(r)||Array.isArray(r)?r:a(t))&&"true"!==r||(r=f(t))}catch(e){r=a(t)}return void 0===e||r?r:e}if(Array.isArray(t))return t.length?t.reduce(function(e,t){var r=null;if(c(t)&&n(o,t)){try{r=f(t)}catch(e){r=a(t)}e[t]=r}return e},{}):void 0!==e?e:{}}var o=localStorage,p=o.setItem.bind(o),a=o.getItem.bind(o),l=o.removeItem.bind(o),m=JSON.stringify;return{set:function(e,t){if(c(e))p(e,c(t)?t:m(t));else if(s(e))for(var r in e)p(r,c(e[r])?e[r]:m(e[r]))},get:i,del:function(e){if(c(e))l(e);else if(Array.isArray(e))for(var t=0,r=e.length;t<r;t++){var n=e[t];c(n)&&l(n)}},each:function(e){for(var t=Object.keys(localStorage),r=0,n=t.length;r<n;r++){var i=t[r];e(i,f(i))}},getOnce:function(e,t){t=i(e,t);if("string"==typeof e)n(o,e)&&l(e);else if(Array.isArray(e)&&e.length)for(var r=0;r<e.length;r++)n(o,e[r])&&l(e[r]);return t},setExpired:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e,t,r){p(e,m({startTime:a,expiredTime:r,value:t}))}var i=t[0],o=t[1],f=t[2],a=+new Date;if(1==t.length){if(s(i))for(var l in i)n(l,i[l],0)}else if(2==t.length){if(c(i))n(i,0,o);else if(s(i)&&y(o))for(var u in i)n(u,i[u],Number(o))}else 3==t.length&&c(i)&&y(f)&&n(i,o,Number(f))},getExpired:function(e){var t;if(c(e))return(t=f(e))&&"startTime"in t?new Date-t.startTime>t.expiredTime?(l(e),!1):t.value:null;for(var r={},n=0;n<e.length;n++){var i,o=e[n];c(o)&&(i=f(o))&&"startTime"in i&&(new Date-i.startTime>i.expiredTime?l(e):r[o]=i.value)}return r},clearAll:function(){o.clear()},clearAllExpired:function(){for(var e=Object.keys(o),t=e.length,r=0;r<t;r++){var n=f(e[r]);n&&"expiredTime"in n&&l(e[r])}}}});
