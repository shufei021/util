!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).file=t()}(this,function(){"use strict";function t(e){for(var t=e.split(",")[0].split(":")[1].split(";")[0],n=window.atob(e.split(",")[1]),e=new ArrayBuffer(n.length),o=new Uint8Array(e),i=0,r=n.length;i<r;i++)o[i]=n.charCodeAt(i);return new Blob([o],{type:t})}function n(n){return new Promise(function(e){var t=new FileReader;t.readAsDataURL(n),t.onload=function(){e(this.result)}})}function c(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",n=document.createElement("a");n.style="display: none",document.body.appendChild(n),n.download=t,n.href=e,document.createEvent?((t=document.createEvent("MouseEvents")).initEvent("click",!0,!1),n.dispatchEvent(t)):document.createEventObject?n.fireEvent("onclick"):"function"==typeof n.onclick&&n.onclick(),document.body.removeChild(n)}return{bytesFormat:function(e){var t;return 0===e?"0 B":e?(t=Math.floor(Math.log(e)/Math.log(1024)),(e/Math.pow(1024,t)).toFixed(2)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]):""},base64ToBlob:t,base64ToFile:function(e,t){for(var e=e.split(","),n=e[0].match(/:(.*?);/)[1],o=atob(e[1]),i=o.length,r=new Uint8Array(i);i--;)r[i]=o.charCodeAt(i);return new File([r],t,{type:n})},blobToBase64:function(n){return new Promise(function(t){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.readAsDataURL(n)})},blobToFile:function(e,t){return new File([e],t,{type:e.type,lastModified:Date.now()})},fileToBase64:n,fileToBlob:function(e){return n(e).then(t)},downloadByBase64:c,downloadByImgLink:function(o,i,r,a){return new Promise(function(n,t){var e=new Image;e.src=o,e.crossOrigin="anonymous",e.onload=function(){r=r||this.width,a=a||this.height;var e=document.createElement("canvas"),t=e.getContext("2d"),t=(e.setAttribute("width",r),e.setAttribute("height",a),t.drawImage(this,0,0,r,a),e.toDataURL("image/png",.95));c(t,i),n(t)},e.onerror=function(e){return t(e)}})},downloadByImgSelector:function(e,r){return new Promise(function(o,t){var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=function(){var e=document.createElement("canvas");e.width=i.width,e.height=i.height;e.getContext("2d").drawImage(i,0,0,e.width,e.height);var e=e.toDataURL("image/png"),t=document.createElement("a"),n=new MouseEvent("click");t.download=r||"defaultName",t.href=e,t.dispatchEvent(n),o()},i.onerror=function(e){return t(e)},i.src=("string"==typeof e?document.querySelector(e):e).src})},bufferFileDownload:function(e,t){var e=new Blob([e],{type:"charset=utf-8"}),n=document.createElement("a"),e=window.URL.createObjectURL(e),t=(n.href=e,n.download=t,document.getElementsByTagName("body")[0]);t.appendChild(n),n.click(),t.removeChild(n),window.URL.revokeObjectURL(e)}}});
